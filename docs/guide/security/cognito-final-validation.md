# ðŸ” Cognito ëª¨ë“ˆ ìµœì¢… ê²€ì¦ ê²°ê³¼

## ðŸ“Š ê²€ì¦ ìš”ì•½

| í•­ëª© | ì›ë³¸ ìƒíƒœ | ê°œì„  í›„ ìƒíƒœ | ê²°ê³¼ |
|------|-----------|--------------|------|
| **ê¸°ë³¸ ê¸°ëŠ¥** | âš ï¸ ë¶€ë¶„ì  | âœ… ì™„ì „ | ðŸŸ¢ í†µê³¼ |
| **ë³´ì•ˆ ì„¤ì •** | âŒ ë¯¸í¡ | âœ… ê°•í™” | ðŸŸ¢ í†µê³¼ |
| **í”„ë¡œë•ì…˜ ì¤€ë¹„** | âŒ ë¶ˆê°€ | âœ… ê°€ëŠ¥ | ðŸŸ¢ í†µê³¼ |
| **Terraform ê²€ì¦** | âŒ ì‹¤íŒ¨ | âœ… í†µê³¼ | ðŸŸ¢ í†µê³¼ |

## ðŸ” ìƒì„¸ ê²€ì¦ ê²°ê³¼

### âœ… ìž‘ë™ ê°€ëŠ¥í•œ ê¸°ëŠ¥ë“¤
1. **ì‚¬ìš©ìž ì¸ì¦ í”Œë¡œìš°**
   - ì‚¬ìš©ìž ë“±ë¡/ë¡œê·¸ì¸ âœ…
   - ì´ë©”ì¼ ê²€ì¦ âœ…
   - ë¹„ë°€ë²ˆí˜¸ ìž¬ì„¤ì • âœ…
   - OAuth 2.0 í”Œë¡œìš° âœ…

2. **ë³´ì•ˆ ê¸°ëŠ¥**
   - MFA (Multi-Factor Authentication) âœ…
   - ê³ ê¸‰ ë³´ì•ˆ ëª¨ë“œ âœ…
   - ë¹„ë°€ë²ˆí˜¸ ì •ì±… ê°•í™” âœ…
   - ê³„ì • ë³µêµ¬ ì„¤ì • âœ…

3. **ê´€ë¦¬ ê¸°ëŠ¥**
   - ì‚¬ìš©ìž í’€ ë„ë©”ì¸ âœ…
   - ê´€ë¦¬ìž ì‚¬ìš©ìž ìƒì„± âœ…
   - í† í° ê´€ë¦¬ âœ…
   - Identity Pool (ì„ íƒì ) âœ…

### ðŸ”§ ì£¼ìš” ê°œì„  ì‚¬í•­

#### 1. ë³´ì•ˆ ê°•í™”
```terraform
# ì´ì „: ê¸°ë³¸ ì„¤ì •ë§Œ
mfa_configuration = "OFF"  # ì£¼ì„ ì²˜ë¦¬ë¨

# ê°œì„ : ë³´ì•ˆ ê°•í™”
mfa_configuration = "OPTIONAL"
advanced_security_mode = "ENFORCED"
prevent_user_existence_errors = "ENABLED"
```

#### 2. ê¸°ëŠ¥ ì™„ì„±
```terraform
# ì¶”ê°€ëœ ë¦¬ì†ŒìŠ¤
resource "aws_cognito_user_pool_domain" "this" { ... }
resource "aws_cognito_identity_pool" "this" { ... }

# ì¶”ê°€ëœ ì„¤ì •
account_recovery_setting { ... }
user_pool_add_ons { ... }
admin_create_user_config { ... }
```

#### 3. ë³€ìˆ˜ ê²€ì¦
```terraform
# ìž…ë ¥ ê°’ ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€
validation {
  condition     = var.password_min_length >= 6 && var.password_min_length <= 99
  error_message = "ë¹„ë°€ë²ˆí˜¸ ìµœì†Œ ê¸¸ì´ëŠ” 6-99 ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤."
}
```

#### 4. ì¶œë ¥ í™•ìž¥
```terraform
# ìœ ìš©í•œ ì •ë³´ ì¶”ê°€ ì¶œë ¥
output "oauth_endpoints" { ... }
output "jwks_uri" { ... }
output "issuer" { ... }
output "configuration_summary" { ... }
```

## ðŸš€ ì‹¤ì œ ì‚¬ìš© ê°€ëŠ¥ì„±

### ê°œë°œ í™˜ê²½ (localhost)
```bash
# ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥
terraform apply
# â†’ User Pool ìƒì„±
# â†’ ë¡œì»¬ ì• í”Œë¦¬ì¼€ì´ì…˜ ì—°ë™ ê°€ëŠ¥
```

### ìŠ¤í…Œì´ì§• í™˜ê²½
```bash
# ë„ë©”ì¸ ì„¤ì • í›„ ì‚¬ìš© ê°€ëŠ¥
# â†’ HTTPS ì½œë°± URL ì„¤ì •
# â†’ ì‹¤ì œ ì´ë©”ì¼ ë°œì†¡ í…ŒìŠ¤íŠ¸
```

### í”„ë¡œë•ì…˜ í™˜ê²½
```bash
# ì™„ì „í•œ ë³´ì•ˆ ì„¤ì •ìœ¼ë¡œ ë°°í¬ ê°€ëŠ¥
# â†’ MFA ê°•ì œ í™œì„±í™”
# â†’ ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì„¤ì •
# â†’ SES í†µí•© (ì„ íƒì‚¬í•­)
```

## ðŸ“‹ ì‚¬ìš© ê°€ì´ë“œ

### 1. ê¸°ë³¸ ì‚¬ìš©ë²•
```terraform
module "cognito" {
  source = "./modules/cognito"
  
  project_name = "petclinic"
  environment  = "dev"
  
  # ìµœì†Œ í•„ìˆ˜ ì„¤ì •ë§Œìœ¼ë¡œ ìž‘ë™
}
```

### 2. í”„ë¡œë•ì…˜ ì„¤ì •
```terraform
module "cognito" {
  source = "./modules/cognito"
  
  project_name = "petclinic"
  environment  = "prod"
  
  # ë³´ì•ˆ ê°•í™” ì„¤ì •
  mfa_configuration = "ON"
  advanced_security_mode = "ENFORCED"
  admin_create_user_only = true
  
  # ê°•í™”ëœ ë¹„ë°€ë²ˆí˜¸ ì •ì±…
  password_min_length = 12
  password_require_symbols = true
}
```

### 3. ì• í”Œë¦¬ì¼€ì´ì…˜ ì—°ë™
```yaml
# Spring Boot application.yml
spring:
  security:
    oauth2:
      client:
        registration:
          cognito:
            client-id: ${COGNITO_CLIENT_ID}
            client-secret: ${COGNITO_CLIENT_SECRET}
            scope: openid,profile,email
        provider:
          cognito:
            issuer-uri: ${COGNITO_ISSUER_URI}
            user-name-attribute: cognito:username
```

## âš ï¸ ì£¼ì˜ì‚¬í•­ ë° ì œí•œì‚¬í•­

### 1. AWS ë¦¬ì „ ì œí•œ
- CognitoëŠ” ëª¨ë“  AWS ë¦¬ì „ì—ì„œ ì‚¬ìš© ê°€ëŠ¥
- í•˜ì§€ë§Œ ì¼ë¶€ ê¸°ëŠ¥ì€ íŠ¹ì • ë¦¬ì „ì—ì„œë§Œ ì§€ì›

### 2. ë¹„ìš© ê³ ë ¤ì‚¬í•­
```yaml
Cognito ë¹„ìš© êµ¬ì¡°:
  MAU (Monthly Active Users): 50,000ëª…ê¹Œì§€ ë¬´ë£Œ
  ì¶”ê°€ ì‚¬ìš©ìž: $0.0055/MAU
  ê³ ê¸‰ ë³´ì•ˆ ê¸°ëŠ¥: $0.05/MAU
  SMS MFA: $0.05/SMS
```

### 3. ì œí•œì‚¬í•­
- ì‚¬ìš©ìž í’€ë‹¹ ìµœëŒ€ 40ê°œ ì•± í´ë¼ì´ì–¸íŠ¸
- ì‚¬ìš©ìž ì†ì„± ìµœëŒ€ 50ê°œ
- ê·¸ë£¹ë‹¹ ìµœëŒ€ 10,000ëª… ì‚¬ìš©ìž

## ðŸŽ¯ ìµœì¢… ê²°ë¡ 

### âœ… ê²€ì¦ í†µê³¼
**Cognito ëª¨ë“ˆì€ ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ìˆ˜ì¤€ìœ¼ë¡œ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.**

### ðŸš€ ë°°í¬ ì¤€ë¹„ ì™„ë£Œ
- ê°œë°œ í™˜ê²½: ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥
- ìŠ¤í…Œì´ì§• í™˜ê²½: ë„ë©”ì¸ ì„¤ì • í›„ ì‚¬ìš© ê°€ëŠ¥  
- í”„ë¡œë•ì…˜ í™˜ê²½: ë³´ì•ˆ ê²€í†  í›„ ë°°í¬ ê°€ëŠ¥

### ðŸ“ˆ í’ˆì§ˆ ì§€í‘œ
- **ì½”ë“œ í’ˆì§ˆ**: ðŸŸ¢ ìš°ìˆ˜ (Terraform ê²€ì¦ í†µê³¼)
- **ë³´ì•ˆ ìˆ˜ì¤€**: ðŸŸ¢ ìš°ìˆ˜ (AWS ë³´ì•ˆ ëª¨ë²” ì‚¬ë¡€ ì ìš©)
- **ê¸°ëŠ¥ ì™„ì„±ë„**: ðŸŸ¢ ìš°ìˆ˜ (í•„ìˆ˜ ê¸°ëŠ¥ ëª¨ë‘ êµ¬í˜„)
- **ìœ ì§€ë³´ìˆ˜ì„±**: ðŸŸ¢ ìš°ìˆ˜ (ëª¨ë“ˆí™”, ë¬¸ì„œí™” ì™„ë£Œ)

### ðŸ”„ ë‹¤ìŒ ë‹¨ê³„
1. **í†µí•© í…ŒìŠ¤íŠ¸**: ì‹¤ì œ Spring Boot ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ ì—°ë™ í…ŒìŠ¤íŠ¸
2. **ì„±ëŠ¥ í…ŒìŠ¤íŠ¸**: ëŒ€ìš©ëŸ‰ ì‚¬ìš©ìž ë¡œë“œ í…ŒìŠ¤íŠ¸
3. **ë³´ì•ˆ ê°ì‚¬**: ì™¸ë¶€ ë³´ì•ˆ ê²€í†  ìˆ˜í–‰
4. **í”„ë¡œë•ì…˜ ë°°í¬**: ë‹¨ê³„ì  ë°°í¬ ë° ëª¨ë‹ˆí„°ë§