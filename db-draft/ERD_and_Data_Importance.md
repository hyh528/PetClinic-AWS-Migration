### **ERD 및 데이터 중요도 분석**

**작성자:** (본인 성함)
**역할:** Data & Migration Lead
**작성일:** 2025년 9월 23일
**목표:** 마이그레이션 대상 데이터의 관계를 정의하고, 이전 전략 수립을 위해 데이터별 중요도를 식별한다.

---

### **1. 데이터 관계도 (ERD - Entity Relationship Diagram) 초안**

각 서비스의 스키마 분석을 통해 파악된 주요 테이블 간의 관계는 다음과 같습니다.

-   **`owners` (1) → `pets` (N)**
    -   한 명의 소유주(Owner)는 여러 마리의 반려동물(Pet)을 가질 수 있습니다.
    -   `pets` 테이블은 `owner_id`를 외래 키(Foreign Key)로 가집니다.

-   **`pets` (1) → `visits` (N)**
    -   한 마리의 반려동물(Pet)은 여러 번의 방문 기록(Visit)을 가질 수 있습니다.
    -   `visits` 테이블은 `pet_id`를 외래 키로 가집니다.

-   **`pets` (N) → `types` (1)**
    -   여러 마리의 반려동물(Pet)은 하나의 타입(Type)에 속합니다. (예: 'Leo'는 'cat', 'Basil'도 'cat')
    -   `pets` 테이블은 `type_id`를 외래 키로 가집니다.

-   **`vets` (N) ↔ `specialties` (M)**
    -   수의사(Vet)와 전문 분야(Specialty)는 다대다(N:M) 관계입니다. (한 명의 수의사는 여러 전문 분야를, 하나의 전문 분야는 여러 수의사가 가질 수 있습니다.)
    -   이 관계는 `vet_specialties` 라는 중간 테이블(Junction Table)을 통해 연결됩니다.

#### **관계 요약도 (텍스트 기반)**

```
[ owners ] ---< (has) >--- [ pets ] ---< (has) >--- [ visits ]
                         |
                         |
                         ^
                         |
                       (is a)
                         |
                         |
                     [ types ]


[ vets ] ---< (has) >--- [ vet_specialties ] ---< (is) >--- [ specialties ]
```

---

### **2. 데이터 중요도 식별**

AWS로의 안전한 마이그레이션 전략을 수립하기 위해 데이터의 중요도를 세 단계로 분류합니다.

-   #### **상 (High) - 최우선 마이그레이션 대상**
    -   **대상 테이블:** `owners`, `pets`, `visits`
    -   **사유:**
        -   고객의 핵심 정보이자 서비스의 근간이 되는 **트랜잭션 데이터**입니다.
        -   데이터가 유실될 경우, 고객의 예약 기록, 진료 기록 등 비즈니스에 직접적이고 심각한 타격을 줍니다.
        -   마이그레이션 시 **데이터 정합성과 무결성을 최우선으로 보장**해야 하며, 필요시 다운타임을 감수하더라도 안전한 이전 방법을 선택해야 합니다.

-   #### **중 (Medium) - 운영 필수 데이터**
    -   **대상 테이블:** `vets`, `specialties`, `vet_specialties`
    -   **사유:**
        -   서비스 운영에 필수적인 **운영 데이터**입니다.
        -   데이터가 유실되면 서비스의 주요 기능(수의사 조회 등)이 마비될 수 있습니다.
        -   하지만 데이터의 변경 빈도가 '상' 등급에 비해 낮고, 최악의 경우 수동 복구가 상대적으로 용이합니다.

-   #### **하 (Low) - 기본 참조 데이터**
    -   **대상 테이블:** `types`
    -   **사유:**
        -   거의 변경되지 않는 단순 분류용 **마스터 데이터**입니다. (예: cat, dog, bird...)
        -   데이터의 양이 적고 정적이라, 마이그레이션 실패 시에도 수동으로 즉시 복구가 가능합니다. 이전 작업의 복잡도에 거의 영향을 주지 않습니다.
---