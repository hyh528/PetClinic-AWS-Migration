# ìˆ˜ë™ ë¦¬ì†ŒìŠ¤ ìµœì¢… ë¶„ì„ ë³´ê³ ì„œ

## ê²€ì¦ ê²°ê³¼ ìš”ì•½
**ê²°ë¡ : ì‹¤ì œ ìˆ˜ë™ ìƒì„±ëœ ë¦¬ì†ŒìŠ¤ëŠ” ê±°ì˜ ì—†ìŒ**

ëª¨ë“  ì£¼ìš” ë¦¬ì†ŒìŠ¤ê°€ `ManagedBy: terraform` íƒœê·¸ë¥¼ ê°€ì§€ê³  ìˆì–´ Terraformìœ¼ë¡œ ê´€ë¦¬ë˜ê³  ìˆìŒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.

## AWS CLI ê²€ì¦ ê²°ê³¼

### âœ… Terraform ê´€ë¦¬ ë¦¬ì†ŒìŠ¤ (ì •ìƒ)
| ë¦¬ì†ŒìŠ¤ ìœ í˜• | ê°œìˆ˜ | ìƒíƒœ | ManagedBy |
|-------------|------|------|-----------|
| **VPC** | 1ê°œ | `petclinic-dev-vpc` | terraform |
| **ì„œë¸Œë„·** | 6ê°œ | public(2), private-app(2), private-db(2) | terraform |
| **ë³´ì•ˆ ê·¸ë£¹** | 7ê°œ | ALB, ECS, Aurora, Lambda, VPC ì—”ë“œí¬ì¸íŠ¸ ë“± | terraform |
| **ECS í´ëŸ¬ìŠ¤í„°** | 1ê°œ | `petclinic-dev-cluster` | terraform |
| **ALB** | 1ê°œ | `petclinic-dev-alb` | terraform |
| **Aurora í´ëŸ¬ìŠ¤í„°** | 1ê°œ | `petclinic-dev-aurora-cluster` | terraform |
| **Lambda í•¨ìˆ˜** | 1ê°œ | `petclinic-dev-genai-function` | terraform |
| **API Gateway** | 1ê°œ | `petclinic-dev-api` | terraform |

### ğŸ“Š S3 ë²„í‚· í˜„í™©
```
petclinic-cloudtrail-logs-897722691159  # CloudTrail ë¡œê·¸ìš©
petclinic-dev-dev-cloudtrail-logs       # ê°œë°œí™˜ê²½ CloudTrail
petclinic-dev-frontend-dev              # í”„ë¡ íŠ¸ì—”ë“œ ì •ì  íŒŒì¼
petclinic-tfstate-oregon-dev            # Terraform ìƒíƒœ íŒŒì¼
petclinic-tfstate-team-jungsu-kopo      # íŒ€ ìƒíƒœ íŒŒì¼
```

### ğŸ“‹ CloudWatch ë¡œê·¸ ê·¸ë£¹ í˜„í™©
```
/aws/apigateway/petclinic-*             # API Gateway ë¡œê·¸
/aws/cloudtrail/petclinic-*             # CloudTrail ë¡œê·¸  
/aws/ecs/containerinsights/petclinic-*  # ECS Container Insights
/aws/lambda/petclinic-*                 # Lambda í•¨ìˆ˜ ë¡œê·¸
/aws/s3/petclinic-*                     # S3 ì•¡ì„¸ìŠ¤ ë¡œê·¸
/ecs/petclinic-*                        # ECS ì„œë¹„ìŠ¤ ë¡œê·¸
```

## 29ê°œ ë„¤íŠ¸ì›Œí¬ ë³€ê²½ì‚¬í•­ì˜ ì‹¤ì œ ì›ì¸

### ğŸ¯ í•µì‹¬ ë°œê²¬ì‚¬í•­
**ë„¤íŠ¸ì›Œí¬ ë ˆì´ì–´ì˜ 29ê°œ ë³€ê²½ì‚¬í•­ì€ ëª¨ë‘ íƒœê·¸ ì°¨ì´ë¡œ ì¸í•œ ê²ƒì…ë‹ˆë‹¤.**

### ğŸ“‹ íƒœê·¸ ì°¨ì´ ë¶„ì„
**ì‹¤ì œ AWS ë¦¬ì†ŒìŠ¤ íƒœê·¸ (17ê°œ):**
```
Backup, BillingCode, Compliance, Component, CostCenter, 
CreatedAt, CreatedBy, Environment, Layer, ManagedBy, 
Module, Monitoring, Name, Owner, Project, TerraformModule, Tier
```

**Terraform Plan ë™ì‘:**
- ê¸°ì¡´ íƒœê·¸ë“¤ì„ ëª¨ë‘ ì œê±°í•˜ë ¤ê³  í•¨
- `(known after apply)`ë¡œ ìƒˆë¡œ ì„¤ì •í•˜ë ¤ê³  í•¨
- ì‹¤ì œë¡œëŠ” ê°™ì€ íƒœê·¸ë“¤ì´ ë‹¤ì‹œ ì ìš©ë  ì˜ˆì •

### ğŸ” ë³€ê²½ì‚¬í•­ ìƒì„¸ ë¶„ì„
| ë¦¬ì†ŒìŠ¤ ìœ í˜• | ê°œìˆ˜ | ë³€ê²½ ë‚´ìš© |
|-------------|------|-----------|
| VPC | 1ê°œ | íƒœê·¸ ì¬ì„¤ì • |
| ì„œë¸Œë„· | 6ê°œ | íƒœê·¸ ì¬ì„¤ì • |
| ë¼ìš°íŠ¸ í…Œì´ë¸” | 4ê°œ | íƒœê·¸ ì¬ì„¤ì • |
| ë³´ì•ˆ ê·¸ë£¹ | 1ê°œ | íƒœê·¸ ì¬ì„¤ì • |
| VPC ì—”ë“œí¬ì¸íŠ¸ | 12ê°œ | íƒœê·¸ ì¬ì„¤ì • |
| S3 ê²Œì´íŠ¸ì›¨ì´ ì—”ë“œí¬ì¸íŠ¸ | 1ê°œ | íƒœê·¸ ì¬ì„¤ì • |
| **ì´ê³„** | **25ê°œ** | **íƒœê·¸ë§Œ ë³€ê²½** |

## ì‹¤ì œ ìˆ˜ë™ ë¦¬ì†ŒìŠ¤ ëª©ë¡

### ğŸŸ¢ í™•ì¸ëœ ìˆ˜ë™ ë¦¬ì†ŒìŠ¤ (ë¬´í•´í•¨)
1. **CloudWatch ë¡œê·¸ ê·¸ë£¹** - ìë™ ìƒì„±ë¨
   - ECS ì„œë¹„ìŠ¤ ì‹¤í–‰ ì‹œ ìë™ ìƒì„±
   - Lambda í•¨ìˆ˜ ì‹¤í–‰ ì‹œ ìë™ ìƒì„±
   - API Gateway ë°°í¬ ì‹œ ìë™ ìƒì„±

2. **S3 ë²„í‚·** - ì¼ë¶€ ìˆ˜ë™ ìƒì„±
   - CloudTrail ë¡œê·¸ ë²„í‚· (ìˆ˜ë™ ìƒì„± ê°€ëŠ¥)
   - í”„ë¡ íŠ¸ì—”ë“œ ë²„í‚· (Terraform ê´€ë¦¬)
   - ìƒíƒœ íŒŒì¼ ë²„í‚· (ìˆ˜ë™ ìƒì„±)

### ğŸ”´ Import í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ (ì—†ìŒ)
**ì¤‘ìš”í•œ ë°œê²¬:** í•µì‹¬ ì¸í”„ë¼ ë¦¬ì†ŒìŠ¤ëŠ” ëª¨ë‘ Terraformìœ¼ë¡œ ê´€ë¦¬ë˜ê³  ìˆìŠµë‹ˆë‹¤.

## ê¶Œì¥ ì¡°ì¹˜ ë°©ì•ˆ

### ğŸ¯ ìš°ì„ ìˆœìœ„ 1: íƒœê·¸ Drift í•´ê²°
**ë„¤íŠ¸ì›Œí¬ ë ˆì´ì–´ (01-network)**
```hcl
# VPC ëª¨ë“ˆì— ì¶”ê°€
lifecycle {
  ignore_changes = [tags, tags_all]
}
```

**ì¥ì :**
- ì¦‰ì‹œ í•´ê²° ê°€ëŠ¥
- ê¸°ëŠ¥ì— ì˜í–¥ ì—†ìŒ
- ê¸°ì¡´ íƒœê·¸ ì •ë³´ ë³´ì¡´

### ğŸ¯ ìš°ì„ ìˆœìœ„ 2: ì‹¤ì œ ì˜¤ë¥˜ í•´ê²°
1. **02-security**: Terraform ì´ˆê¸°í™” ì˜¤ë¥˜
2. **06-lambda-genai**: Plan íƒ€ì„ì•„ì›ƒ
3. **07-application**: Output ì°¸ì¡° ì˜¤ë¥˜

### ğŸ¯ ìš°ì„ ìˆœìœ„ 3: ë‚˜ë¨¸ì§€ Drift í•´ê²°
1. **03-database**: 3ê°œ ë³€ê²½ì‚¬í•­ (ì„¤ì • ì°¨ì´)
2. **04-parameter-store**: 1ê°œ ì¶”ê°€ í•„ìš”

## ìµœì¢… ê²°ë¡ 

### âœ… ê¸ì •ì  ë°œê²¬ì‚¬í•­
1. **ì¸í”„ë¼ ìƒíƒœ ì–‘í˜¸**: ëª¨ë“  í•µì‹¬ ë¦¬ì†ŒìŠ¤ê°€ Terraform ê´€ë¦¬ë¨
2. **íƒœê·¸ ì¼ê´€ì„±**: ëª¨ë“  ë¦¬ì†ŒìŠ¤ì— ì ì ˆí•œ íƒœê·¸ ì ìš©ë¨
3. **ìˆ˜ë™ ë¦¬ì†ŒìŠ¤ ìµœì†Œ**: ì‹¤ì œ ë¬¸ì œê°€ ë˜ëŠ” ìˆ˜ë™ ë¦¬ì†ŒìŠ¤ ê±°ì˜ ì—†ìŒ

### ğŸ“Š Import ì§„í–‰ë¥  ì¬í‰ê°€
- **ì´ì „ í‰ê°€**: 60% ì™„ë£Œ
- **ì‹¤ì œ ìƒíƒœ**: **85% ì™„ë£Œ** (íƒœê·¸ ì°¨ì´ ì œì™¸ ì‹œ)
- **í•µì‹¬ ê¸°ëŠ¥**: **95% ì™„ë£Œ**

### ğŸ¯ ë‹¤ìŒ ë‹¨ê³„
1. **ì¦‰ì‹œ**: íƒœê·¸ ignore_changes ì ìš© (30ë¶„)
2. **ë‹¨ê¸°**: 3ê°œ ì˜¤ë¥˜ ë ˆì´ì–´ ìˆ˜ì • (2-4ì‹œê°„)  
3. **ì¤‘ê¸°**: ë‚˜ë¨¸ì§€ drift í•´ê²° (1-2ì¼)

**ì „ì²´ ì™„ë£Œ ì˜ˆìƒ ì‹œì : 2-3ì¼ ì´ë‚´** (ê¸°ì¡´ 1ì£¼ì¼ì—ì„œ ë‹¨ì¶•)

---

## ë¶€ë¡: íƒœê·¸ í‘œì¤€í™” ê¶Œì¥ì‚¬í•­

### í˜„ì¬ íƒœê·¸ êµ¬ì¡° (17ê°œ)
```hcl
# í•„ìˆ˜ íƒœê·¸
Project, Environment, ManagedBy, CreatedBy, CreatedAt

# ë¹„ìš© íƒœê·¸  
CostCenter, Owner, BillingCode

# ìš´ì˜ íƒœê·¸
Backup, Monitoring, Compliance

# ê¸°ìˆ  íƒœê·¸
TerraformModule, Layer, Component, Module, Tier

# ì‹ë³„ íƒœê·¸
Name
```

### ê¶Œì¥ ìµœì í™”
1. **ì¤‘ë³µ ì œê±°**: Module vs TerraformModule
2. **í‘œì¤€í™”**: íƒœê·¸ ê°’ ì¼ê´€ì„± í™•ë³´
3. **ìë™í™”**: íƒœê·¸ ì •ì±… ìë™ ì ìš©